<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width,initial-scale=1" />
        <title>가격비교 요청 | CALLBUS</title>

        <!-- 전역/컴포넌트/페이지 전용 CSS -->
        <link rel="stylesheet" href="../assets/css/base.css" />
        <link rel="stylesheet" href="../assets/css/components.css" />
        <link rel="stylesheet" href="../assets/css/pages/quote.css" />
    </head>

    <body>
        <!-- 노란 히어로 영역 -->
        <section class="quote-hero">
            <div class="container" style="max-width: 960px; padding: 32px 20px">
                <h1 class="hero__title">고객님은 누구신가요?</h1>

                <!-- 고객 유형 세그먼트 -->
                <div
                    class="seg"
                    role="tablist"
                    aria-label="고객 유형"
                    style="margin-top: 8px"
                >
                    <button
                        class="seg__btn is-active"
                        data-value="personal"
                        role="tab"
                        aria-selected="true"
                    >
                        개인
                    </button>
                    <button
                        class="seg__btn"
                        data-value="corporate"
                        role="tab"
                        aria-selected="false"
                    >
                        법인
                    </button>
                    <button
                        class="seg__btn"
                        data-value="agency"
                        role="tab"
                        aria-selected="false"
                    >
                        여행사
                    </button>
                </div>

                <!-- 목적 선택 -->
                <h2 class="quote-subtitle">어떤 목적으로 이용하시나요?</h2>
                <ul
                    class="pill-grid"
                    id="purposeGrid"
                    style="margin-bottom: 20px"
                >
                    <li>
                        <button
                            class="pill is-active"
                            data-value="wedding_guests"
                        >
                            결혼식 하객버스
                        </button>
                    </li>
                    <li>
                        <button class="pill" data-value="corporate_workshop">
                            기업행사/워크샵
                        </button>
                    </li>
                    <li>
                        <button class="pill" data-value="wedding_car">
                            웨딩카
                        </button>
                    </li>
                    <li>
                        <button class="pill" data-value="commute_regular">
                            통근버스 정기운행
                        </button>
                    </li>
                    <li>
                        <button class="pill" data-value="group_trip">
                            단체여행
                        </button>
                    </li>
                    <li>
                        <button class="pill" data-value="school_mt">
                            학교 행사/MT
                        </button>
                    </li>
                    <li>
                        <button class="pill" data-value="field_study">
                            현장학습
                        </button>
                    </li>
                    <li>
                        <button class="pill" data-value="club">동호회</button>
                    </li>
                    <li>
                        <button class="pill" data-value="concert_festival">
                            콘서트/페스티벌
                        </button>
                    </li>
                    <li>
                        <button class="pill" data-value="golf">골프모임</button>
                    </li>
                    <li>
                        <button class="pill" data-value="hiking">산악회</button>
                    </li>
                    <li>
                        <button class="pill" data-value="religion">
                            종교행사
                        </button>
                    </li>
                    <li>
                        <button class="pill" data-value="airport">
                            공항이용
                        </button>
                    </li>
                    <li><button class="pill" data-value="etc">기타</button></li>
                </ul>

                <!-- ✅ 현재 선택을 담아둘 숨김값 -->
                <input type="hidden" id="customerType" value="personal" />
                <input type="hidden" id="purpose" value="wedding_guests" />

                <!-- ✅ 다음 단계 버튼 -->
                <div
                    style="
                        margin-top: 16px;
                        display: flex;
                        flex-direction: column; /* 세로 정렬 */
                        align-items: center; /* 가운데 정렬 */
                        gap: 10px; /* 버튼-링크 간격 */
                    "
                >
                    <button id="goDate" type="button" class="btn btn-primary">
                        날짜 선택하러 가기 →
                    </button>
                    <a href="../index.html">← 홈으로</a>
                </div>
            </div>
        </section>

        <!-- 동작 스크립트 -->
        <script>
            // ?type=large 등 초기 라디오 반영 (필요시 유지)
            const initType = new URLSearchParams(location.search).get('type');
            if (initType) {
                const r = document.querySelector(
                    `input[name="busType"][value="${initType}"]`
                );
                if (r) r.checked = true;
            }

            // 세그먼트(개인/법인/여행사)
            const segBtns = document.querySelectorAll('.seg__btn');
            const customerType = document.getElementById('customerType');
            segBtns.forEach((btn) => {
                btn.addEventListener('click', (e) => {
                    e.preventDefault(); // 버튼 기본 동작 방지
                    segBtns.forEach((b) => {
                        b.classList.remove('is-active');
                        b.setAttribute('aria-selected', 'false');
                    });
                    btn.classList.add('is-active');
                    btn.setAttribute('aria-selected', 'true');
                    customerType.value = btn.dataset.value;
                });
            });

            // 목적 칩 (단일 선택)
            const purposeGrid = document.getElementById('purposeGrid');
            const purposeInput = document.getElementById('purpose');
            purposeGrid.addEventListener('click', (e) => {
                const t = e.target.closest('.pill');
                if (!t) return;
                e.preventDefault();
                purposeGrid
                    .querySelectorAll('.pill')
                    .forEach((p) => p.classList.remove('is-active'));
                t.classList.add('is-active');
                purposeInput.value = t.dataset.value;
            });

            // ✅ date.html로 이동 (선택값을 쿼리스트링으로 전달)
            document.getElementById('goDate').addEventListener('click', () => {
                const qs = new URLSearchParams({
                    customerType: document.getElementById('customerType').value,
                    purpose: document.getElementById('purpose').value,
                }).toString();

                // 같은 폴더(quote/) 내 date.html로 이동
                location.href = `./date.html?${qs}`;
            });

            // ⛔️ 폼이 없으므로 이전의 quoteForm submit 핸들러는 제거했습니다.
        </script>
    </body>
</html>
